<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mars.web.business.em.mapper.MenuMapper">
	<select id="selectMenuList" resultType="java.util.HashMap">
	    /* [MenuMapper][selectMenuList] 메뉴 리스트 조회 (사용자별) */
	    SELECT	C.MENU_ID
			,	C.MENU_NAME 
			,	C.MENU_URL 
			,	C.MENU_LEVEL 
			,	C.MENU_NO 
			,	C.PARENT_ID 
			,	C.POPUP_YN
			,	C.SAVE_YN 
			,	C.DELETE_YN 
			,	C.EXCEL_DOWN_YN 
		FROM 
		(
			SELECT	A.MENU_ID
				,	A.MENU_NAME 
				,	A.MENU_URL 
				,	A.MENU_LEVEL 
				,	A.MENU_NO 
				,	A.PARENT_ID 
				,	A.POPUP_YN
				,	B.SAVE_YN 
				,	B.DELETE_YN 
				,	B.EXCEL_DOWN_YN 
			FROM 	EM_MENU A 
			INNER JOIN EM_MENU_ROLE B 
			ON A.MENU_ID = B.MENU_ID 
			WHERE B.USER_TYPE_CD = #{userTypeCd}
			AND A.USE_YN = 'Y'
			AND B.USE_YN = 'Y'
		) C 
		START WITH C.PARENT_ID IS NULL 
		CONNECT BY PRIOR C.MENU_ID = C.PARENT_ID 
		ORDER SIBLINGS BY C.MENU_ID
	</select>
	
</mapper>